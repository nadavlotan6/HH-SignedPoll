<!DOCTYPE html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" type="text/css" href="/css/style.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<script src="/socket.io/socket.io.js"></script>

<head>
  <title>Home Hero Poll</title>
  <link rel="icon" href="https://www.homehero.co.il/assets/images/favicon/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script>
    var socket = io();
    socket.on('change_address', function (data) {
      document.getElementById('full_address').value = data.full_address;
      document.getElementById('sent').value = data.sent;
      document.getElementById('index').value = data.index;
      document.getElementById('id').value = data.id;
      document.getElementById('seller').value = data.seller;
      document.getElementById('date').value = data.date;
      document.getElementById('city').value = data.city;
      document.getElementById('address').value = data.address;
      document.getElementById('seller_name').value = data.seller_name;
      document.getElementById('seller_phone').value = data.seller_phone;
      document.getElementById('expert_name').value = data.expert_name;
      document.getElementById('expert_phone').value = data.expert_phone;
      document.getElementById('meeting_date').value = data.meeting_date;
      document.getElementById('meeting_time').value = data.meeting_time;
      document.getElementById('full_address').value = data.full_address;
      document.getElementById('sent_before').value = data.sent_before;
      document.getElementById('happened').value = data.happened;
      document.getElementById('signed').value = data.signed;
      document.getElementById('undecided').value = data.undecided;
      document.getElementById('reason').value = data.reason;
      document.getElementById('expert_sms_time').value = data.expert_sms_time;
      document.getElementById('expert_sms_unix').value = data.expert_sms_unix;
      document.getElementById('second_seller_sms_date').value = data.second_seller_sms_date;
      document.getElementById('second_seller_sms_time').value = data.second_seller_sms_time;
      document.getElementById('second_seller_sms_unix').value = data.second_seller_sms_unix;
      document.getElementById('third_seller_sms_date').value = data.third_seller_sms_date;
      document.getElementById('third_seller_sms_time').value = data.third_seller_sms_time;
      document.getElementById('third_seller_sms_unix').value = data.third_seller_sms_unix;
    });

    function showUndecided() {
      document.getElementById('reasonDiv').style.display = 'block';
      window.scrollTo(0, document.body.scrollHeight);
    }

    function dontShowUndecided() {
      document.getElementById('reasonDiv').style.display = 'none';
      window.scrollTo(0, document.body.scrollHeight);
    }

    function redirect() {
      alert("×”×˜×•×¤×¡ × ×©×œ×— ×‘×”×¦×œ×—×”! \n ×‘×”×¦×œ×—×” ×‘×”××©×š ğŸ‘ğŸ¼")
      return true;
    }
  </script>
</head>

<body>
  <div class=imgDiv>
    <img class=logoImg src="https://www.homehero.co.il/assets/images/headerlogo.svg">
  </div>
  <div class=formDiv>
    <!-- <form action="test.php" method="post" id=pollForm name="submit-to-google-sheet" align=center dir="rtl"
      onSubmit="alert('×”×˜×•×¤×¡ × ×©×œ×— ×‘×”×¦×œ×—×”! \n ×ª×•×“×” ×¨×‘×”! :)');"> -->
    <form name="submit-to-google-sheet" align=center dir="rtl">


      <div class="upperDiv">
        <h2 style="margin-top:2px"> ×§×‘×¢× ×•, × ×¤×’×©× ×• ×•×”×›×¨× ×•. </h2>
        <h2 style="margin-top:2px"> ××•×“×™× â€“ × ×”× ×™× ×• ×××•×“! </h2>
        <h3 style="margin-top:2px"> ×•×¢×›×©×™×• × ×©××— ×œ×©××•×¢ ××™×š ×”×™×” ×œ×š, ×›×“×™ ×©× ×•×›×œ ×œ×©×¤×¨ ×•×œ×”×©×ª×¤×¨. </h3>

        <br>

        <input id="sent" name="sent" type="text" hidden="hidden" value="N">
        <input id="index" name="index" type="text" hidden="hidden" value="">
        <input id="id" name="id" type="text" hidden="hidden" value="">
        <input id="date" name="date" type="text" hidden="hidden" value="">
        <input id="seller" name="seller" type="text" hidden="hidden" value="">
        <input id="city" name="city" type="text" hidden="hidden" value="">
        <input id="address" name="address" type="text" hidden="hidden" value="">
        <input id="seller_name" name="seller_name" type="text" hidden="hidden" value="">
        <input id="seller_phone" name="seller_phone" type="text" hidden="hidden" value="">
        <input id="expert_name" name="expert_name" type="text" hidden="hidden" value="">
        <input id="expert_phone" name="expert_phone" type="text" hidden="hidden" value="">
        <input id="meeting_date" name="meeting_date" type="text" hidden="hidden" value="">
        <input id="meeting_time" name="meeting_time" type="text" hidden="hidden" value="">
        <input id="full_address" name="full_address" type="text" hidden="hidden" value="">
        <input id="sent_before" name="sent_before" type="text" hidden="hidden" value="">
        <input id="happened" name="happened" type="text" hidden="hidden" value="">
        <input id="signed" name="signed" type="text" hidden="hidden" value="">
        <input id="undecided" name="undecided" type="text" hidden="hidden" value="">
        <input id="reason" name="reason" type="text" hidden="hidden" value="">
        <input id="expert_sms_time" name="expert_sms_time" type="text" hidden="hidden" value="">
        <input id="expert_sms_unix" name="expert_sms_unix" type="text" hidden="hidden" value="">
        <input id="second_seller_sms_date" name="second_seller_sms_date" type="text" hidden="hidden" value="">
        <input id="second_seller_sms_time" name="second_seller_sms_time" type="text" hidden="hidden" value="">
        <input id="second_seller_sms_unix" name="second_seller_sms_unix" type="text" hidden="hidden" value="">
        <input id="third_seller_sms_date" name="third_seller_sms_date" type="text" hidden="hidden" value="">
        <input id="third_seller_sms_time" name="third_seller_sms_time" type="text" hidden="hidden" value="">
        <input id="third_seller_sms_unix" name="third_seller_sms_unix" type="text" hidden="hidden" value="">
        <input id="checkbox_str" name="checkbox_str" type="text" hidden="hidden" value="">
      </div>

      <div class=meetingDiv>
        <div class=answersDiv>
          <h3 style="margin: 5px;"> ××– ××™×š ×–×›×™× ×• ×‘×š? ××” ×’×¨× ×œ×‘×—×•×¨ ×‘× ×•? </h3>
          <input name="sellerReason" type="radio" value="tech"> ×”×˜×›× ×•×œ×•×’×™×” ×•×”××ª×¨ ×©×œ Home Hero <br>
          <input name="sellerReason" type="radio" value="marketing" required> ×™×›×•×œ×•×ª ×”×©×™×•×•×§ ×•×”×‘××ª ×§×•× ×™× <br>
          <input name="sellerReason" type="radio" value="dd"> ×”×‘×“×™×§×” ×”××©×¤×˜×™×ª <br>
          <input name="sellerReason" type="radio" value="commission"> ×”×¢××œ×” <br>
          <input name="sellerReason" type="radio" value="agent"> ×”××•××—×”! <br>
          <input name="commentsFirst" type="text" placeholder="×¢×•×“ ××©×”×•?"> <br>
          <input type="text" hidden="hidden" name="checkboxStr" id="checkbox_str" value="">
        </div>
      </div>

      <br>

      <div class=exclusivityDiv>
        <div class=answersDiv>
          <h3 style="margin: 5px;" class=divheader> ×× × ×“×¨×’ ××ª ×”××•××—×” ×©×¤×’×©×ª </h3>
          <input name="ranking" type="radio" value="5" onclick="dontShowUndecided();" required> â­ï¸ï¸ï¸ï¸ï¸ï¸â­ï¸â­ï¸â­ï¸â­ï¸ <br>
          <input name="ranking" type="radio" value="4" onclick="dontShowUndecided();"> â­ï¸â­ï¸â­ï¸â­ï¸<br>
          <input name="ranking" type="radio" value="3" onclick="dontShowUndecided();"> â­ï¸â­ï¸â­ï¸ <br>
          <input name="ranking" type="radio" value="2" onclick="showUndecided();"> â­ï¸â­ï¸ <br>
          <input name="ranking" type="radio" value="1" onclick="showUndecided();"> â­ï¸ <br>
        </div>

        <div class=answersDiv id=reasonDiv style="display: none">
          <h3 style="margin: 5px;" class=divheader> ×× ×—× ×• ××¦×˜×¢×¨×™× ×œ×©××•×¢, ×ª×•×›×œ ×œ×¤×¨×˜ ××” ×”×¡×™×‘×”? </h3>
          <input type="checkbox" name="notProffessional" value="1"> ××§×¦×•×¢×™×•×ª <br>
          <input type="checkbox" name="area" value="1"> ×©×œ×™×˜×” ×‘××™×–×•×¨ <br>
          <input type="checkbox" name="service" value="1"> ×©×™×¨×•×ª×™×•×ª <br>
          <input type="checkbox" name="trust" value="1"> ×××™× ×•×ª <br>
          ××—×¨ <input name="otherReasonForBadRanking" type="text"> <br>
        </div>
      </div>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
      <br>

      <button id="submitButton" class="button" type="submit"> ×©×œ×— ×˜×•×¤×¡ </button>

    </form>
    <script>
      const scriptURL =
        'https://script.google.com/macros/s/AKfycbxElRxZ2r9xswkRL1oSRTjQXlJ2XfrZOhhG3Dc7_A1U1iZFhys/exec'
      const form = document.forms["submit-to-google-sheet"]

      form.addEventListener('submit', e => {
        console.log(form)
        e.preventDefault()
        fetch(scriptURL, {
            method: 'POST',
            body: new FormData(form)
          })
          .then(response => console.log('Success!', response))
          .catch(error => console.error('Error!', error.message))
        redirect();
      })
    </script>
  </div>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>
    const prefix = "https://spreadsheets.google.com/feeds/list/";
    const sheetID = "1I6ADcGlCqYTH7bQD9v19FLvNcbZUjCkUiq82sgQHlnU";
    const postfix = "/od6/public/values?alt=json"

    const spreadsheetURL = prefix + sheetID + postfix;

    $.getJSON(spreadsheetURL, function (data) {
      console.log(data)
    });
  </script>

  <script src="https://wzrd.in/standalone/formdata-polyfill"></script>
  <script src="https://wzrd.in/standalone/promise-polyfill@latest"></script>
  <script src="https://wzrd.in/standalone/whatwg-fetch@latest"></script>

</body>